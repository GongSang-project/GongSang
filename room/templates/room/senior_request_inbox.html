{% load static %}
{% load matching_filters %}

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ì…ì£¼ í¬ë§ ìš”ì²­ ë³´ê¸°</title>
    <link rel="stylesheet" href="{% static 'room/css/senior_request_inbox.css' %}">
</head>
<body>
    <div id="root">
        <div id="app-wrapper">

            <!-- ìƒë‹¨ í—¤ë” -->
            <div class="header">
                <a href="/users/home/senior/">
                    <img src="{% static 'room/images/Vector.png' %}" alt="" class="icon">
                </a>
                <h1 class="heart-icon">ğŸ’Œ ì…ì£¼ í¬ë§ ìš”ì²­ ë³´ê¸°</h1>
            </div>

            {% if requests %}
                <!-- ë°© ì •ë³´ -->
                <div class="room-info">
                    <h2>{{ requests.first.room.address_detailed }}</h2>
                    <p>ì›”ì„¸ {{ requests.first.room.deposit }}/{{ requests.first.room.rent_fee }}</p>
                </div>

                <!-- ìš”ì²­ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ -->
                 <div class="request-list">
                {% for req in requests %}

                    <!-- ìš”ì²­ ì¹´ë“œ -->
                    <div class="request-item" data-request-id="{{ req.id }}">
                        <!-- ì¹´ë“œ ë‚´ ê¸°ë³¸ ì •ë³´(ì²­ë…„ ì •ë³´)) -->
                        <div class="request-item-header">
                            <img src="{% static 'room/images/default_profile.png' %}" alt="í”„ë¡œí•„ ì‚¬ì§„" class="profile-image">
                            <img src="{% static 'room/images/circle.svg'%}" alt="ì›ì•„ì´ì½˜" class="circle-icon">
                            <div class="request-item-header-info">
                                <h3>{{ req.youth.username }} ({{ req.youth.age }}ì„¸ / {% if req.youth.gender == 'F' %}ì—¬ì„±{% else %}ë‚¨ì„±{% endif %})</h3>
                                <p class="requested-at">{{ req.requested_at|korean_timesince }}</p>
                            </div>
                        </div> 

                        <!-- ì¹´ë“œ ë‚´ ë²„íŠ¼ ì˜ì—­ -->
                        <div class="request-item-buttons">
                            <button
                                data-request-id="{{ req.id }}"
                                data-is-contacted="{{ req.is_contacted|yesno:'true,false' }}"
                                class="telnum_btn">
                                <img src="{% static 'room/images/telnum_btn.svg' %}" alt="ì „í™”ë²ˆí˜¸ í™•ì¸ ë²„íŠ¼" class="telnum_btn_icon"/>
                            </button>

                            <a class="view-youth-btn" href="{% url 'users:youth_profile' req.id %}">
                                <p>ì²­ë…„ ì •ë³´ ë³´ê¸°</p>
                            </a>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <!-- ë¹ˆ ìƒíƒœ -->
                <div class="empty-state">
                    <p>ì…ì£¼ ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            {% endif %}
            </div>
            
        <!-- ì „í™” ì•„ì´ì½˜ ë²„íŠ¼ í´ë¦­ ì‹œ í™”ë©´ ì˜¤ë²„ë ˆì´ -->
        <div id="overlay" class="overlay" hidden>
        <!-- ì „í™” ì•„ì´ì½˜ ë²„íŠ¼ í´ë¦­ ì‹œ í•˜ë‹¨ ì•¡ì…˜ë°” -->
         <div id="bottom-cta" aria-hidden="true">
                <a id="cta-call" class="cta-btn" href="#" role="button"></a>
                <button id="cta-copy" class="cta-btn" type="button">ì·¨ì†Œ</button>
        </div>
        </div>
        </div>
    </div>

    <script src="{% static 'room/js/senior_request_inbox.js' %}"></script>
</body>
</html>
