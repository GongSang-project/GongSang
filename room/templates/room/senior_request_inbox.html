{% load static %}
{% load matching_filters %}

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>입주 희망 요청 보기</title>
    <link rel="stylesheet" href="{% static 'room/css/senior_request_inbox.css' %}">
</head>
<body>
    <div id="root">
        <div id="app-wrapper">

            <!-- 상단 헤더 -->
            <div class="header">
                <a href="/users/home/senior/">
                    <img src="{% static 'room/images/Vector.png' %}" alt="" class="icon">
                </a>
                <h1 class="heart-icon">💌 입주 희망 요청 보기</h1>
            </div>

            {% if requests %}
                <!-- 방 정보 -->
                <div class="room-info">
                    <h2>{{ requests.first.room.address_detailed }}</h2>
                    <p>월세 {{ requests.first.room.deposit }}/{{ requests.first.room.rent_fee }}</p>
                </div>

                <!-- 요청 카드 리스트 -->
                 <div class="request-list">
                {% for req in requests %}

                    <!-- 요청 카드 -->
                    <div class="request-item" data-request-id="{{ req.id }}">
                        <!-- 카드 내 기본 정보(청년 정보)) -->
                        <div class="request-item-header">
                            <img src="{% static 'room/images/default_profile.png' %}" alt="프로필 사진" class="profile-image">
                            <img src="{% static 'room/images/circle.svg'%}" alt="원아이콘" class="circle-icon">
                            <div class="request-item-header-info">
                                <h3>{{ req.youth.username }} ({{ req.youth.age }}세 / {% if req.youth.gender == 'F' %}여성{% else %}남성{% endif %})</h3>
                                <p class="requested-at">{{ req.requested_at|korean_timesince }}</p>
                            </div>
                        </div> 

                        <!-- 카드 내 버튼 영역 -->
                        <div class="request-item-buttons">
                            <button
                                data-request-id="{{ req.id }}"
                                data-is-contacted="{{ req.is_contacted|yesno:'true,false' }}"
                                class="telnum_btn">
                                <img src="{% static 'room/images/telnum_btn.svg' %}" alt="전화번호 확인 버튼" class="telnum_btn_icon"/>
                            </button>

                            <a class="view-youth-btn" href="{% url 'users:youth_profile' req.id %}">
                                <p>청년 정보 보기</p>
                            </a>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <!-- 빈 상태 -->
                <div class="empty-state">
                    <p>입주 요청이 없습니다.</p>
                </div>
            {% endif %}
            </div>
            
        <!-- 전화 아이콘 버튼 클릭 시 화면 오버레이 -->
        <div id="overlay" class="overlay" hidden>
        <!-- 전화 아이콘 버튼 클릭 시 하단 액션바 -->
         <div id="bottom-cta" aria-hidden="true">
                <a id="cta-call" class="cta-btn" href="#" role="button"></a>
                <button id="cta-copy" class="cta-btn" type="button">취소</button>
        </div>
        </div>
        </div>
    </div>

    <script src="{% static 'room/js/senior_request_inbox.js' %}"></script>
</body>
</html>
