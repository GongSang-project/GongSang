{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ other_user.username }} ì±„íŒ…ë°©</title>
    <link rel="stylesheet" href="{% static 'chat/css/chatroom.css' %}">
</head>
<body>
<header>
    <a href="#" class="back-btn">&lt;</a>
    <div class="user-info">
        <h1>{{ other_user.username }} (ì›”ì„¸ {{ room.deposit }}/{{ room.rent_fee }})</h1>
        <span>ğŸ‘¤ 2</span>
    </div>
</header>

    {% csrf_token %}
    <input type="hidden" id="csrf_token" value="{{ csrf_token }}">

    <div class="chat-container">
        <div class="system-message">{{ chatroom.created_at|date:"Yë…„ mì›” dì¼" }}</div>
        <div class="system-message">ì±„íŒ…ë°©ì´ í˜•ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ëŒ€í™”ë¥¼ ì‹œì‘í•´ ë³´ì„¸ìš”.</div>

        <div class="message-box received">
            <div class="message">
                <div class="sender-name">{{ chatroom.youth.username }}</div>
                <div class="request-card">
                    <p class="title">ì…ì£¼ í¬ë§ì„ ìš”ì²­í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
                    <p>ì„±í–¥ì´ (!--   ì¶”í›„ ai ì‘ì—… í•„ìš”   --!)ì  ì˜ ë§ëŠ” í¸ì…ë‹ˆë‹¤.</p>
                    <div class="profile">
                        {% if chatroom.youth.profile_image %}
                            <img src="{{ chatroom.youth.profile_image.url }}" alt="ì²­ë…„ í”„ë¡œí•„">
                        {% else %}
                            <img src="{% static 'images/default_profile.png' %}" alt="ì²­ë…„ í”„ë¡œí•„">
                        {% endif %}
                        <div>
                            <p><strong>{{ chatroom.youth.username }}</strong></p>
                            <p>{{ chatroom.youth.age }}ì„¸ {{ chatroom.youth.gender|lower }}</p>
                        </div>
                    </div>


                    <!-- ì¶”í›„ ì²­ë…„ ì •ë³´ ë³´ì—¬ì£¼ëŠ” ë§í’ì„  ì¬ì‘ì—… í•„ìš”, í”„ë¡ íŠ¸ ì‘ì—…ì‹œ ìš°ì„  í…ìŠ¤íŠ¸ë¡œ ì¨ë‘ì…”ë„ ë©ë‹ˆë‹¤
                    <div class="hashtags">
                        {% with youth=chatroom.youth %}
                            <span>#{{ youth.get_preferred_time_display|slice:"2:" }}</span>
                            <span>#{{ youth.get_important_points_display|slice:"2:" }}</span>
                            <span>#{{ youth.get_conversation_style_display|slice:"2:" }}</span>
                        {% endwith %}
                    </div>  -->



                    <div class="btn-container">
                        <button onclick="acceptRequest()">ìš”ì²­ ìˆ˜ë½í•˜ê¸°</button>
                    </div>
                </div>
            </div>
        </div>

        {% for message in messages %}
            {% if message.author == request.user %}
                <div class="message-box sent">
                    <div class="message sent-message">
                        <div class="message-content">
                            <p>{{ message.content }}</p>
                            <span class="message-timestamp">{{ message.timestamp|date:"H:i" }}</span>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="message-box received">
                    <div class="message received-message">
                        <div class="sender-name">{{ other_user.username }}</div>
                        <div class="message-content">
                            <p>{{ message.content }}</p>
                            <span class="message-timestamp">{{ message.timestamp|date:"H:i" }}</span>
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endfor %}

    </div>

    <div class="input-area">
        <input type="text" placeholder="ë©”ì‹œì§€ ì…ë ¥">
        <button>â–¶ï¸</button>
    </div>
    <script src="{% static 'chat/js/chatroom.js' %}"></script>
</body>
</html>