{% load static %}
{% load custom_filters %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ youth_user.username }}ÎãòÏùò ÌîÑÎ°úÌïÑ</title>
    <link rel="stylesheet" href="{% static 'users/css/youth_profile.css' %}?v=9" />
</head>
<body>
    <div id="root">
        <div id="app-wrapper">

            <div class="header">
                <a href="http://localhost:8000/room/senior/inbox/">
                    <img src="{% static 'users/images/Vector.png' %}" alt="" class="icon">

                </a>
                <h1>Ï≤≠ÎÖÑ Ï†ïÎ≥¥</h1>
            </div>

            <div class="profile-container">

                <div class="profile-header">
                    <!--ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ -->
                    <img src="{% if youth_user.profile_image %}{{ youth_user.profile_image.url }}{% else %}{% static 'users/images/default_profile.png' %} {% endif %}" alt="ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ" class="profile-image">
                    
                    <!-- Í∏∞Î≥∏ Ï†ïÎ≥¥ -->
                    <div class="user-info">
                        <h3>{{ youth_user.username }}</h3>
                        <p>{{ youth_user.age }}ÏÑ∏&nbsp;{{ youth_user.get_gender_display }}</p>

                        <!-- Ïã†Î∂ÑÏ¶ù Ïù∏Ï¶ù Ïó¨Î∂Ä -->
                        <div class="verification">
                            {% if is_id_card_uploaded %}
                                <span class="verified">
                                    <img src="{% static 'users/images/verified_mark.png' %}" alt="" class="verified_mark">Ïã†Î∂ÑÏ¶ù Ïù∏Ï¶ù ÏôÑÎ£å
                                </span>
                            {% else %}
                                <span class="unverified">‚ö†Ô∏è  Ïã†Î∂ÑÏ¶ù ÎØ∏Ïù∏Ï¶ù</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            
                <!-- Í∏∞Î≥∏ Ï†ïÎ≥¥ÎûÄ ÎÅù -->

                <div class="line1"></div>

                <!-- Îß§Ïπ≠ Î∂ÑÏÑù Í≤∞Í≥º -->
                <div class="matching-result">
                    <h4>ÏÑ±Ìñ• Îß§Ïπ≠ Î∂ÑÏÑù Í≤∞Í≥º</h4>
                    <p class="matching-text">{{ matching_text }}</p>
                    <p class="explanation">{{ explanation }}</p>

                    <!-- Îß§Ïπ≠ Ï†êÏàò Î∞î -->
                    <div class="score-bar" aria-label="Îß§Ïπ≠ Ï†êÏàò{{ matching_score }}Ï†ê" data-score="{{ matching_score|default:0 }}">
                        <div class="score-fill"></div>
                    </div>
                    
                    <!-- ÌïòÌä∏ Ïù¥ÎØ∏ÏßÄ -->
                    <img src="{% static 'users/images/heart.svg' %}" alt="" class="heart">

                    <!-- Ï†êÏàò -->
                    <img src="{% static 'users/images/score.png' %}" alt="" class="score"/>
                    <div class="score-text">{{ matching_score }}Ï†ê</div>

                    <!-- Ìï¥ÏãúÌÉúÍ∑∏ -->
                    <div class="hashtags" id="hashtags">
                        {% for tag in hashtags %}
                            <span class="tag">#{{ tag }}</span>
                        {% endfor %}
                    </div>
                </div>
                <!-- Îß§Ïπ≠ Í≤∞Í≥ºÎûÄ ÎÅù -->

                <div class="line2"></div>

                <!-- ÌõÑÍ∏∞&ÏÑ±Ìñ• wrapper -->
                <div class="sections-wrapper">

                <!-- ÌõÑÍ∏∞ -->
                <div class="reviews-section">
                    <div class="review-title">
                        <h4>ÌõÑÍ∏∞</h4>
                        <img src="{% static 'users/images/star.svg' %}" alt=""/>
                        <p class="review-score">{{ average_rating|floatformat:"1" }}</p>
                        <p class="review-count">({{ review_count }}Í∞ú)</p>
                    </div>
                    
                    <!-- AI Í¥ÄÎ†® ÎÇ¥Ïö©Îì§ <- AI Íµ¨ÌòÑ ÏôÑÎ£åÎêòÎ©¥ Îã§Ïãú ÏÇ¥Î¶º -->
                    <!-- <div class="review-summary-wrapper">
                    <div class="review-summary">
                        <h4>AI ÌõÑÍ∏∞ ÏöîÏïΩ Î∂ÑÏÑù üìå</h4>
                        <p>{{ ai_summary }}</p>
                    </div>

                    <div class="review-hashtags">
                        <div class="review-hashtags-item">
                            <p>Í∞úÏÑ†ÎêòÏóàÏúºÎ©¥ Ï¢ãÏïòÏùÑ Ï†ê</p>
                            <div class="hashtags">
                                {% for tag in bad_hashtags %}
                                    <span>{{ tag }}</span>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="review-hashtags-item">
                            <p>Ï¢ãÏïòÎçò Ï†ê</p>
                            <div class="hashtags">
                                {% for tag in good_hashtags %}
                                    <span>{{ tag }}</span>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    </div> -->

                    <div class="individual-reviews">
                        {% for review in reviews|slice:":2" %}
                            <div class="review-item">
                                <div class="review-meta">
                                    <img src="{% static 'users/images/default_profile.png' %}" alt="" class="reviewer-profile"/>
                                    <p class="reviewer-name">
                                        {% if review.is_anonymous %}
                                            ÏùµÎ™Ö{{ forloop.counter }}
                                        {% else %}
                                            {{ review.author.username }}
                                        {% endif %}
                                    </p>
                                    <p class="residence-period">{{ review.get_lived_period_display }}</p>
                                </div>
                                
                                <div class="review-rating">
                                    <span class="star-rating">
                                        {% if review.satisfaction == 'VERY_SATISFIED' %}‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ
                                        {% elif review.satisfaction == 'SATISFIED' %}‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ
                                        {% elif review.satisfaction == 'NORMAL' %}‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ
                                        {% elif review.satisfaction == 'DISSATISFIED' %}‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ
                                        {% else %}‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ
                                        {% endif %}
                                    </span>
                                    <span class="review-date">{{ review.created_at|date:"YÎÖÑ mÏõî dÏùº" }} ÏûëÏÑ±</span>
                                </div>
                                <p class="review-text">{{ review.good_points }}</p>
                            </div>
                        {% empty %}
                            <p class="none-review">ÏïÑÏßÅ Îì±Î°ùÎêú ÌõÑÍ∏∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
                        {% endfor %}

                        {% if review_count > 0 %}
                            <a href="{% url 'users:all_reviews' youth_user.id %}" class="view-all-reviews">
                                ÌõÑÍ∏∞ {{ review_count }}Í∞ú Î™®Îëê Î≥¥Í∏∞
                            </a>
                        {% endif %}
                    </div>
                </div>
                <!-- ÌõÑÍ∏∞ÎûÄ ÎÅù -->

                <div class="line3"></div>

                <!-- ÏÑ±Ìñ• -->
                <div class="traits-section">
                    <h4 class="trait-title">Í∞ÅÏûêÏùò ÏÑ±Ìñ•</h4>


                    <div class="trait-item-list">
                    <!-- ÌôúÎèô ÏãúÍ∞ÑÎåÄ -->
                    <div class="trait-item">
                        <p class="trait-label">ÌôúÎèô ÏãúÍ∞ÑÎåÄ</p>
                        <div class="trait-values">
                            <div class="card {% if senior_user.preferred_time == youth_user.preferred_time %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ youth_user.username }}(Ï≤≠ÎÖÑ)</p>
                                {% with t=youth_parts.preferred_time %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                            <div class="card {% if senior_user.preferred_time == youth_user.preferred_time %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ senior_user.username }}(ÎÇò)</p>
                                {% with t=owner_parts.preferred_time %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                        </div>
                    </div>

                    <!-- ÎåÄÌôî ÎπàÎèÑ -->
                    <div class="trait-item">
                        <div class="trait-label">ÎåÄÌôî ÎπàÎèÑ</div>
                        <div class="trait-values">
                            <div class="card {% if senior_user.conversation_style == youth_user.conversation_style %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ youth_user.username }}(Ï≤≠ÎÖÑ)</p>
                                {% with t=youth_parts.conversation_style %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                            <div class="card {% if senior_user.conversation_style == youth_user.conversation_style %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ senior_user.username }}(ÎÇò)</p>
                                {% with t=owner_parts.conversation_style %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                        </div>
                    </div>

                    <!-- ÏÉùÌôú Í≥µÍ∞Ñ Ï§ëÏöî Ìè¨Ïù∏Ìä∏ -->
                    <div class="trait-item ip-item">
                        <div class="trait-label">ÏÉùÌôú Í≥µÍ∞Ñ Ï§ëÏöî Ìè¨Ïù∏Ìä∏</div>

                        {% with youth_list=youth_parts.important_points owner_list=owner_parts.important_points %}
                        <div class="trait-values ip-values">

                            {% with y0=youth_list.0 o0=owner_list.0 %}
                                <div class="card {% if y0 %}{% for o in owner_list %}{% if o.label == y0.label %}card-value-matched{% endif %}{% endfor %}{% endif %}">
                                    <p class="trait-user-name">{{ youth_user.username }}(Ï≤≠ÎÖÑ)</p>
                                    {% if y0 %}
                                        <p class="trait-emoji">{{ y0.emoji }}</p>
                                        <p class="trait-label-text">{{ y0.label }}</p>
                                    {% else %}
                                        <p class="trait-emoji"> </p>
                                        <p class="trait-label-text">ÏÑ†ÌÉù ÏóÜÏùå</p>
                                    {% endif %}
                                </div>

                                <div class="card {% if o0 %}{% for y in youth_list %}{% if y.label == o0.label %}card-value-matched{% endif %}{% endfor %}{% endif %}">
                                    <p class="trait-user-name">{{ senior_user.username }}(ÎÇò)</p>
                                    {% if o0 %}
                                        <p class="trait-emoji">{{ o0.emoji }}</p>
                                        <p class="trait-label-text">{{ o0.label }}</p>
                                    {% else %}
                                        <p class="trait-emoji"> </p>
                                        <p class="trait-label-text">ÏÑ†ÌÉù ÏóÜÏùå</p>
                                    {% endif %}
                                </div>
                            {% endwith %}

                            {% with y1=youth_list.1 o1=owner_list.1 %}
                                <div class="card {% if y1 %}{% for o in owner_list %}{% if o.label == y1.label %}card-value-matched{% endif %}{% endfor %}{% endif %}">
                                    <p class="trait-user-name">{{ youth_user.username }}(Ï≤≠ÎÖÑ)</p>
                                    {% if y1 %}
                                        <p class="trait-emoji">{{ y1.emoji }}</p>
                                        <p class="trait-label-text">{{ y1.label }}</p>
                                    {% else %}
                                        <p class="trait-emoji"> </p>
                                        <p class="trait-label-text">ÏÑ†ÌÉùÏóÜÏùå</p>
                                    {% endif %}
                                </div>

                                <div class="card {% if o1 %}{% for y in youth_list %}{% if y.label == o1.label %}card-value-matched{% endif %}{% endfor %}{% endif %}">
                                    <p class="trait-user-name">{{ senior_user.username }}(ÎÇò)</p>
                                    {% if o1 %}
                                        <p class="trait-emoji">{{ o1.emoji }}</p>
                                        <p class="trait-label-text">{{ o1.label }}</p>
                                    {% else %}
                                        <p class="trait-emoji"> </p>
                                        <p class="trait-label-text">ÏÑ†ÌÉùÏóÜÏùå</p>
                                    {% endif %}
                                </div>
                            {% endwith %}
                        </div>
                        {% endwith %}
                    </div>

                    <!-- ÏÜåÏùå ÌóàÏö©ÎèÑ -->
                    <div class="trait-item">
                        <div class="trait-label">ÏÜåÏùå ÌóàÏö©ÎèÑ</div>
                        <div class="trait-values">
                            <div class="card {% if senior_user.noise_level == youth_user.noise_level %}card-value-matched{% endif %}"> 
                                <p class="trait-user-name">{{ youth_user.username }}(Ï≤≠ÎÖÑ)</p>
                                {% with t=youth_parts.noise_level %}  
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                            <div class="card {% if senior_user.noise_level == youth_user.noise_level %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ senior_user.username }}(ÎÇò)</p>
                                {% with t=owner_parts.noise_level %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                        </div>
                    </div>    

                    <!-- ÏãùÏÇ¨ Ïó¨Î∂Ä -->
                    <div class="trait-item">
                        <div class="trait-label">ÏãùÏÇ¨ Ïó¨Î∂Ä</div>
                        <div class="trait-values">
                            <div class="card {% if senior_user.meal_preference == youth_user.meal_preference %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ youth_user.username }}(Ï≤≠ÎÖÑ)</p>
                                {% with t=youth_parts.meal_preference %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                            <div class="card {% if senior_user.meal_preference == youth_user.meal_preference %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ senior_user.username }}(ÎÇò)</p>
                                {% with t=owner_parts.meal_preference %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                        </div>
                    </div>

                    <!-- Í≥µÏö©Í≥µÍ∞Ñ ÏÇ¨Ïö© -->
                    <div class="trait-item">
                        <div class="trait-label">Í≥µÏö©Í≥µÍ∞Ñ ÏÇ¨Ïö©</div>
                        <div class="trait-values">
                            <div class="card {% if senior_user.space_sharing_preference == youth_user.space_sharing_preference %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ youth_user.username }}(Ï≤≠ÎÖÑ)</p>
                                {% with t=youth_parts.space_sharing_preference %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                            <div class="card {% if senior_user.space_sharing_preference == youth_user.space_sharing_preference %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ senior_user.username }}(ÎÇò)</p>
                                {% with t=owner_parts.space_sharing_preference %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                        </div>
                    </div>

                    <!-- Î∞òÎ†§ÎèôÎ¨º Ïó¨Î∂Ä -->
                    <div class="trait-item">
                        <div class="trait-label">Î∞òÎ†§ÎèôÎ¨º Ïó¨Î∂Ä</div>
                        <div class="trait-values">
                            <div class="card {% if senior_user.pet_preference == youth_user.pet_preference %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ youth_user.username }}(Ï≤≠ÎÖÑ)</p>
                                {% with t=youth_parts.pet_preference %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                            <div class="card {% if senior_user.pet_preference == youth_user.pet_preference %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ senior_user.username }}(ÎÇò)</p>
                                {% with t=owner_parts.pet_preference %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                        </div>
                    </div>

                    <!-- Ï£ºÎßê Ìå®ÌÑ¥ -->
                    <div class="trait-item">
                        <div class="trait-label">Ï£ºÏöî ÏÉùÌôú Ìå®ÌÑ¥</div>
                        <div class="trait-values">
                            <div class="card {% if senior_user.weekend_preference == youth_user.weekend_preference %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ youth_user.username }}(Ï≤≠ÎÖÑ)</p>
                                {% with t=youth_parts.weekend_preference %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                            <div class="card {% if senior_user.weekend_preference == youth_user.weekend_preference %}card-value-matched{% endif %}">
                                <p class="trait-user-name">{{ senior_user.username }}(ÎÇò)</p>
                                {% with t=owner_parts.weekend_preference %}
                                    <p class="trait-emoji">{{ t.emoji }}</p>
                                    <p class="trait-label-text">{{ t.label }}</p>
                                {% endwith %}
                            </div>
                        </div>
                    </div>

                    <div class="trait-item"></div>
                    </div>

                </div>

            </div>
            <!-- ÏÑ±Ìñ• ÎÅù -->
            <div class="footer">
                <button
                    data-request-id="{{ req.id }}"
                    data-is-contacted="{{ req.is_contacted|yesno:'true,false' }}"
                    class="telnum_btn">
                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="22" viewBox="0 0 18 22" fill="none">
                        <path d="M8.92346 7.67941L7.06248 9.31166C7.30848 10.1348 7.6521 10.9269 8.08636 11.672C8.53931 12.4117 9.08511 13.093 9.71106 13.7002L12.1211 12.9743C13.4713 12.5673 14.9452 12.9853 15.8431 14.0302L17.2157 15.6272C17.7715 16.2684 18.0501 17.0958 17.9926 17.9343C17.935 18.7728 17.5458 19.5564 16.9074 20.1192C14.6684 22.1166 11.221 22.7919 8.63992 20.8099C6.37045 19.0649 4.45089 16.9244 2.97822 14.4965C1.50181 12.0806 0.513316 9.4102 0.0663618 6.63012C-0.4287 3.50202 1.91384 0.998667 4.8347 0.14515C6.57642 -0.3652 8.43515 0.510315 9.07423 2.14256L9.82807 4.06737C10.3231 5.33444 9.96759 6.7643 8.92346 7.67941Z" fill="white"/>
                        </svg>
                    </span>
                    <span>Ï†ÑÌôîÌïòÍ∏∞</span>

                </button>
            </div>

        <!-- Ï†ÑÌôî ÏïÑÏù¥ÏΩò Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú ÌôîÎ©¥ Ïò§Î≤ÑÎ†àÏù¥ -->
        <div id="overlay" class="overlay" hidden>
        <!-- Ï†ÑÌôî ÏïÑÏù¥ÏΩò Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú ÌïòÎã® Ïï°ÏÖòÎ∞î -->
         <div id="bottom-cta" aria-hidden="true">
                <a id="cta-call" class="cta-btn" href="#" role="button"></a>
                <button id="cta-copy" class="cta-btn" type="button">Ï∑®ÏÜå</button>
        </div>
        </div>


        </div>
    </div> 
    </div>
    <script src="{% static 'users/js/youth_profile.js' %}?v=8"></script>
</body>
</html>
